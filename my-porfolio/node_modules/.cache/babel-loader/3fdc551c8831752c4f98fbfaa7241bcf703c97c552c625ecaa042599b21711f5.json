{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import{Navbar}from\"../components/Navbar/Navbar\";import{Store}from\"../Store\";import{useSignupMutation}from\"../hooks/userHooks\";import{toast}from\"react-toastify\";import{getError}from\"../utils\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SignupPage=()=>{const navigate=useNavigate();const{search}=useLocation();const redirectInUrl=new URLSearchParams(search).get('redirect');const redirect=redirectInUrl?redirectInUrl:'/';const[name,setName]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const{state,dispatch}=useContext(Store);const{userInfo}=state;useEffect(()=>{if(userInfo){navigate(redirect);}},[navigate,redirect,userInfo]);const{mutateAsync:signup}=useSignupMutation();const submitHandler=async e=>{e.preventDefault();if(password!==confirmPassword){toast.error('Passwords do not match');return;}try{const data=await signup({name,email,password});//   directly singin after sign up\ndispatch({type:'USER_SIGNIN',payload:data});localStorage.setItem('userInfo',JSON.stringify(data));navigate(redirect);}catch(err){toast.error(getError(err));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"general px-4 h-[100vh] w-[100%] pt-[110px]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",style:{height:'97%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-wrapper mx-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl text-center py-4 font-semibold\",children:[/*#__PURE__*/_jsx(\"span\",{className:\" text-green-600 mr-2\",children:\"#\"}),\"Sign Up\"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"max-w-sm mx-auto flex flex-col\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"block mb-2 text-sm font-medium text-white\",children:\"Your name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name\",className:\"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light\",placeholder:\"enter your name\",required:true,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block mb-2 text-sm font-medium text-white\",children:\"Your email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",className:\"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light\",placeholder:\"enter your email\",required:true,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block mb-2 text-sm font-medium text-white\",children:\"Your password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light\",required:true,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"repeat-password\",className:\"block mb-2 text-sm font-medium text-white\",children:\"Confirm your password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"repeat-password\",className:\"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light\",required:true,onChange:e=>setConfirmPassword(e.target.value)})]}),/*#__PURE__*/_jsx(Link,{className:\" text-green-500 hover:underline \",to:\"/signin\",children:\"Already have an account?\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"hero-button spin-icons my-4 px-2 py-2 rounded contact-button front\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-gear\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-2\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-gear\"})]})]})]})})})]});};export default SignupPage;","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","useLocation","useNavigate","Navbar","Store","useSignupMutation","toast","getError","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SignupPage","navigate","search","redirectInUrl","URLSearchParams","get","redirect","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","state","dispatch","userInfo","mutateAsync","signup","submitHandler","e","preventDefault","error","data","type","payload","localStorage","setItem","JSON","stringify","err","children","className","style","height","onSubmit","htmlFor","id","placeholder","required","onChange","target","value","to"],"sources":["C:/Users/bilan/Desktop/vs code/react/my-own/my-portfolio/my-porfolio/src/pages/SignupPage.tsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { Navbar } from \"../components/Navbar/Navbar\";\r\nimport { Store } from \"../Store\";\r\nimport { useSignupMutation } from \"../hooks/userHooks\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getError } from \"../utils\";\r\nimport { ApiError } from \"../types/ApiError\";\r\n\r\nconst SignupPage = () => {\r\n  const navigate = useNavigate()\r\n  const { search } = useLocation()\r\n  const redirectInUrl = new URLSearchParams(search).get('redirect')\r\n  const redirect = redirectInUrl ? redirectInUrl : '/'\r\n\r\n  const [name, setName] = useState('')\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [confirmPassword, setConfirmPassword] = useState('')\r\n\r\n  const { state, dispatch } = useContext(Store)\r\n  const { userInfo } = state\r\n\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      navigate(redirect)\r\n    }\r\n  }, [navigate, redirect, userInfo])\r\n\r\n\r\n  const { mutateAsync: signup } = useSignupMutation()\r\n\r\n  const submitHandler = async (e: React.SyntheticEvent) => {\r\n    e.preventDefault()\r\n    if (password !== confirmPassword) {\r\n      toast.error('Passwords do not match')\r\n      return\r\n    }\r\n    try {\r\n      const data = await signup({\r\n        name,\r\n        email,\r\n        password,\r\n      })\r\n    //   directly singin after sign up\r\n      dispatch({ type: 'USER_SIGNIN', payload: data })\r\n      localStorage.setItem('userInfo', JSON.stringify(data))\r\n      navigate(redirect)\r\n    } catch (err) {\r\n      toast.error(getError(err as ApiError))\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n    <Navbar />\r\n    <div className=\"general px-4 h-[100vh] w-[100%] pt-[110px]\">\r\n      <div className=\"wrapper\" style={{height: '97%'}}>\r\n        <div className=\"form-wrapper mx-4\">\r\n          <h3 className=\"text-2xl text-center py-4 font-semibold\"><span className=\" text-green-600 mr-2\">#</span>Sign Up</h3>\r\n          <form className=\"max-w-sm mx-auto flex flex-col\" onSubmit={submitHandler}>\r\n          <div className=\"mb-5\">\r\n              <label\r\n                htmlFor=\"name\"\r\n                className=\"block mb-2 text-sm font-medium text-white\"\r\n              >\r\n                Your name\r\n              </label>\r\n              <input\r\n                type=\"name\"\r\n                id=\"name\"\r\n                className=\"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light\"\r\n                placeholder=\"enter your name\"\r\n                required\r\n                onChange={(e) => setName(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"mb-5\">\r\n              <label\r\n                htmlFor=\"email\"\r\n                className=\"block mb-2 text-sm font-medium text-white\"\r\n              >\r\n                Your email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                id=\"email\"\r\n                className=\"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light\"\r\n                placeholder=\"enter your email\"\r\n                required\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"mb-5\">\r\n              <label\r\n                htmlFor=\"password\"\r\n                className=\"block mb-2 text-sm font-medium text-white\"\r\n              >\r\n                Your password\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                id=\"password\"\r\n                className=\"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light\"\r\n                required\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"mb-5\">\r\n              <label\r\n                htmlFor=\"repeat-password\"\r\n                className=\"block mb-2 text-sm font-medium text-white\"\r\n              >\r\n                Confirm your password\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                id=\"repeat-password\"\r\n                className=\"shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:shadow-sm-light\"\r\n                required\r\n                onChange={(e) => setConfirmPassword(e.target.value)}\r\n              />\r\n            </div>\r\n            <Link className=\" text-green-500 hover:underline \" to={\"/signin\"}>Already have an account?</Link>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"hero-button spin-icons my-4 px-2 py-2 rounded contact-button front\"\r\n            >\r\n              <i className=\"fa-solid fa-gear\"></i>\r\n              <span className=\"mx-2\">Sign Up</span>\r\n              <i className=\"fa-solid fa-gear\"></i>\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignupPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import{Navbar}from\"../components/Navbar/Navbar\";import{Store}from\"../Store\";import{useSigninMutation}from\"../hooks/userHooks\";import{toast}from\"react-toastify\";import{getError}from\"../utils\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SigninPage=()=>{//   redirect user in home page after login\nconst navigate=useNavigate();const{search}=useLocation();const redirectInUrl=new URLSearchParams(search).get('redirect');const redirect=redirectInUrl?redirectInUrl:'/';//   get email and password from input box\nconst[email,setEmail]=useState('');const[password,setPassword]=useState('');//   get user info from context\nconst{state,dispatch}=useContext(Store);const{userInfo}=state;//   we use useSigninMutation Hook and distract returned data in object mutateAsync. then we rename it to signin\nconst{mutateAsync:signin,isPending}=useSigninMutation();//   handler when user click on login button\nconst submitHandler=async e=>{e.preventDefault();try{// signin from useSigninMutation() => mutateAsync: signin. email and password from useState from input fields\nconst data=await signin({email,password});//   next step: we use dispatch with data (data it is that return useSigninMutation() with email and password)\ndispatch({type:'USER_SIGNIN',payload:data});//   then we add data to localyStorage\nlocalStorage.setItem('userInfo',JSON.stringify(data));//   use redirect to redirect user to the homepage\nnavigate(redirect);}catch(err){toast.error(getError(err));}};useEffect(()=>{// we check user login or not and if user login we use redirect from this page. userInfo we take from useContext\nif(userInfo){navigate(redirect);}},[navigate,redirect,userInfo]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"general px-4 h-[100vh] w-[100%] pt-[110px]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",style:{height:'97%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-wrapper mx-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl text-center py-4 font-semibold \",children:[/*#__PURE__*/_jsx(\"span\",{className:\" text-green-600 mr-2\",children:\"#\"}),\"Sign In\"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"max-w-sm mx-auto flex flex-col\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block mb-2 text-sm font-medium text-white\",children:\"Your email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",className:\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",placeholder:\"enter your email\",required:true,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block mb-2 text-sm font-medium text-white\",children:\"Your password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",required:true,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsx(Link,{className:\" text-green-500 hover:underline \",to:\"/signup\",children:\"Still no account. Create it...\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"hero-button spin-icons my-4 px-2 py-2 rounded contact-button front\",disabled:isPending,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-gear\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-2\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-gear\"})]})]})]})})})]});};export default SigninPage;","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","useLocation","useNavigate","Navbar","Store","useSigninMutation","toast","getError","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SigninPage","navigate","search","redirectInUrl","URLSearchParams","get","redirect","email","setEmail","password","setPassword","state","dispatch","userInfo","mutateAsync","signin","isPending","submitHandler","e","preventDefault","data","type","payload","localStorage","setItem","JSON","stringify","err","error","children","className","style","height","onSubmit","htmlFor","id","placeholder","required","onChange","target","value","to","disabled"],"sources":["C:/Users/bilan/Desktop/vs code/react/my-own/my-portfolio/my-porfolio/src/pages/SigninPage.tsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { Navbar } from \"../components/Navbar/Navbar\";\r\nimport {Store} from \"../Store\";\r\nimport { useSigninMutation } from \"../hooks/userHooks\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getError } from \"../utils\";\r\nimport { ApiError } from \"../types/ApiError\";\r\n\r\nconst SigninPage = () => {\r\n    //   redirect user in home page after login\r\n  const navigate = useNavigate()\r\n  const { search } = useLocation()\r\n  const redirectInUrl = new URLSearchParams(search).get('redirect')\r\n  const redirect = redirectInUrl ? redirectInUrl : '/'\r\n\r\n  //   get email and password from input box\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n\r\n  //   get user info from context\r\n  const { state, dispatch } = useContext(Store)\r\n  const { userInfo } = state\r\n\r\n//   we use useSigninMutation Hook and distract returned data in object mutateAsync. then we rename it to signin\r\n  const { mutateAsync: signin, isPending } = useSigninMutation()\r\n\r\n  //   handler when user click on login button\r\n  const submitHandler = async (e: React.SyntheticEvent) => {\r\n    e.preventDefault()\r\n    try {\r\n        // signin from useSigninMutation() => mutateAsync: signin. email and password from useState from input fields\r\n      const data = await signin({\r\n        email,\r\n        password,\r\n      })\r\n    //   next step: we use dispatch with data (data it is that return useSigninMutation() with email and password)\r\n      dispatch({ type: 'USER_SIGNIN', payload: data })\r\n    //   then we add data to localyStorage\r\n      localStorage.setItem('userInfo', JSON.stringify(data))\r\n    //   use redirect to redirect user to the homepage\r\n      navigate(redirect)\r\n    } catch (err) {\r\n      toast.error(getError(err as ApiError))\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // we check user login or not and if user login we use redirect from this page. userInfo we take from useContext\r\n    if (userInfo) {\r\n      navigate(redirect)\r\n    }\r\n  }, [navigate, redirect, userInfo])\r\n\r\n  return (\r\n    <>\r\n    <Navbar />\r\n    <div className=\"general px-4 h-[100vh] w-[100%] pt-[110px]\">\r\n      <div className=\"wrapper\" style={{height: '97%'}}>\r\n        <div className=\"form-wrapper mx-4\">\r\n        <h3 className=\"text-2xl text-center py-4 font-semibold \"><span className=\" text-green-600 mr-2\">#</span>Sign In</h3>\r\n          <form className=\"max-w-sm mx-auto flex flex-col\" onSubmit={submitHandler}>\r\n            <div className=\"mb-5\">\r\n              <label\r\n                htmlFor=\"email\"\r\n                className=\"block mb-2 text-sm font-medium text-white\"\r\n              >\r\n                Your email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                id=\"email\"\r\n                className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\r\n                placeholder=\"enter your email\"\r\n                required\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"mb-5\">\r\n              <label\r\n                htmlFor=\"password\"\r\n                className=\"block mb-2 text-sm font-medium text-white\"\r\n              >\r\n                Your password\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                id=\"password\"\r\n                className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\r\n                required\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n            </div>\r\n            <Link className=\" text-green-500 hover:underline \" to={\"/signup\"}>Still no account. Create it...</Link>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"hero-button spin-icons my-4 px-2 py-2 rounded contact-button front\"\r\n              disabled={isPending}\r\n            >\r\n              <i className=\"fa-solid fa-gear\"></i>\r\n              <span className=\"mx-2\">Sign In</span>\r\n              <i className=\"fa-solid fa-gear\"></i>\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SigninPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}